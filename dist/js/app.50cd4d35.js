(function(t){function e(e){for(var n,s,o=e[0],c=e[1],d=e[2],u=0,p=[];u<o.length;u++)s=o[u],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&p.push(r[s][0]),r[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);l&&l(e);while(p.length)p.shift()();return i.push.apply(i,d||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],n=!0,o=1;o<a.length;o++){var c=a[o];0!==r[c]&&(n=!1)}n&&(i.splice(e--,1),t=s(s.s=a[0]))}return t}var n={},r={app:0},i=[];function s(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=n,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(a,n,function(e){return t[e]}.bind(null,n));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var d=0;d<o.length;d++)e(o[d]);var l=c;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"56d7":function(t,e,a){"use strict";a.r(e),a.d(e,"eventBus",(function(){return N}));a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",[a("article",{attrs:{id:"main"}},[a("Add"),a("article",{staticClass:"kanban"},[a("section",{staticClass:"board board_plan"},[a("h1",{staticClass:"board__title"},[t._v("План: "+t._s(t.quantity.for_board_1))]),a("Board",{staticClass:"tasks_plan",attrs:{id:"board-1"}},[a("Card",{attrs:{id:"1",cardDescription:"Лорем",executor:"Я"}}),a("Card",{attrs:{id:"2",cardDescription:"Ипсум",executor:"Я"}})],1)],1),a("section",{staticClass:"board board_in-work"},[a("h1",{staticClass:"board__title"},[t._v("В работе: "+t._s(t.quantity.for_board_2))]),a("Board",{staticClass:"tasks_plan",attrs:{id:"board-2"}})],1),a("section",{staticClass:"board board_ready"},[a("h1",{staticClass:"board__title"},[t._v("Готово: "+t._s(t.quantity.for_board_3))]),a("Board",{staticClass:"tasks_plan",attrs:{id:"board-3"}})],1)])],1),a("Redact")],1)},i=[],s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cards",attrs:{id:t.id},on:{dragover:function(t){t.preventDefault()},drop:function(e){return e.preventDefault(),t.drop(e)}}},[t._t("default")],2)},o=[],c={name:"Board",props:["id"],methods:{drop:function(t){var e=t.dataTransfer.getData("card_id"),a=document.getElementById(e);a.style.display="flex",t.target.appendChild(a),N.$emit("needTime"),N.$emit("done"),N.$emit("backToPlan"),N.$emit("makeCount")}}},d=c,l=a("2877"),u=Object(l["a"])(d,s,o,!1,null,null,null),p=u.exports,m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"task-card",attrs:{id:t.id,draggable:"true"},on:{dragover:function(t){t.stopPropagation()},dragstart:t.dragStart}},[a("h1",{staticClass:"task-card__title"},[t._v("Задача №"+t._s(t.id))]),a("p",{staticClass:"task-card__description"},[t._v(t._s(t.computedCardDescription))]),a("h2",{staticClass:"task-card__header"},[t._v("Дата и время начала")]),a("span",{staticClass:"task-card__info"},[t._v(t._s(t.computedStartTime))]),a("h2",{staticClass:"task-card__header"},[t._v("Ушло времени")]),a("span",{staticClass:"task-card__info"},[t._v(t._s(t.computedWastedTime))]),a("span",{staticClass:"task-card__info",staticStyle:{display:"none"}},[t._v(t._s(t.popUpFinishTime))]),a("span",{staticClass:"task-card__info",staticStyle:{display:"none"}},[t._v(t._s(t.popUpStartDate))]),a("h2",{staticClass:"task-card__header"},[t._v("Ответственный")]),a("span",{staticClass:"task-card__info"},[t._v(t._s(t.computedExecutor))]),a("div",{staticClass:"control-panel"},[a("button",{staticClass:"control-panel__button material-icons",attrs:{onclick:"PopUpShow(this.parentNode.parentNode.parentNode.id, this.parentNode.parentNode.id)"}},[t._v(" create ")]),a("button",{staticClass:"control-panel__button material-icons",on:{click:function(e){return t.changeBoard(t.id)}}},[t._v("done")]),a("button",{staticClass:"control-panel__button material-icons",on:{click:function(e){return t.removeCard(t.id)}}},[t._v("clear")])])])},_=[],f=(a("fb6a"),a("ac1f"),a("5319"),{name:"Card",props:["id","cardDescription","executor"],data:function(){return{computedCardDescription:this.cardDescription,computedStartTime:"",popUpFinishTime:"",popUpStartDate:"",computedWastedTime:"",computedExecutor:this.executor}},created:function(){var t=this;N.$on("needTime",(function(){var e=document.getElementById(t.id),a=e.parentNode.id,n=a.slice(a.length-1);if("2"===n&&!t.computedStartTime){t.computedStartTime=Math.floor(Date.now()/1e3);var r=new Date;t.popUpStartDate=t.formatTime(r),t.computedStartTime=t.formatTimeReadable(t.formatTime(r))}})),N.$on("done",(function(){var e=document.getElementById(t.id),a=e.parentNode.id,n=a.slice(a.length-1);if("3"===n){var r,i=new Date(Date.parse(t.computedStartTime)),s=new Date,o=s-i,c=Math.floor(o/6e4),d=Math.floor(o/36e5);switch(c){case 0:r="Меньше минуты";break;case c>59:c=o%6e4,r=d+"Часов: "+d+", минут: "+c;break;default:r="Минут: "+c;break}t.popUpFinishTime=t.formatTime(s),t.computedWastedTime=r}})),N.$on("backToPlan",(function(){var e=document.getElementById(t.id),a=e.parentNode.id,n=a.slice(a.length-1);"1"===n&&(t.computedStartTime=null,t.popUpFinishTime=null,t.popUpStartDate=null,t.computedWastedTime=null)})),N.$on("applyChanges",(function(t){var e=document.getElementById(t),a=e.children,n=document.getElementById("task-description").value,r=document.getElementById("task-start").value,i=document.getElementById("in-charge").value,s=document.getElementById("task-status").value;n&&(a[1].innerHTML=n),r&&(a[3].innerHTML=h.methods.formatTimeReadable(r)),i&&(a[9].innerHTML=i),e.parentNode.id!==s&&(document.getElementById(s).appendChild(e),N.$emit("needTime"),N.$emit("done"),N.$emit("backToPlan"),N.$emit("makeCount"))}))},methods:{dragStart:function(t){var e=t.target;t.dataTransfer.setData("card_id",e.id)},changeBoard:function(t){var e=document.getElementById(t),a=e.parentNode.id,n=a.slice(a.length-1);document.getElementById(a.slice(0,-1)+(parseInt(n)+1)).appendChild(e),N.$emit("needTime"),N.$emit("done"),N.$emit("backToPlan"),N.$emit("makeCount")},removeCard:function(t){document.getElementById(t).remove(),N.$emit("makeCount")},formatTime:function(t){var e=t.getMinutes(),a=t.getHours(),n=t.getDate(),r=t.getMonth()+1,i=t.getFullYear();return e<10&&(e="0"+e),a<10&&(a="0"+a),n<10&&(n="0"+n),r<10&&(r="0"+r),i+"-"+r+"-"+n+"T"+a+":"+e},formatTimeReadable:function(t){return t.replace("-",".").replace("-",".").replace("T",", ")}}}),b=f,v=Object(l["a"])(b,m,_,!1,null,null,null),h=v.exports,C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"new-task",attrs:{action:""},on:{submit:function(e){return e.preventDefault(),t.addCard(e)}}},[a("label",{staticClass:"new-task__label",attrs:{for:"new-task-description"}},[t._v(" Добавить новую задачу ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newCardDescription,expression:"newCardDescription"}],staticClass:"new-task__input",attrs:{id:"new-task-description",name:"new-task-description",placeholder:"Описание",required:"",type:"text"},domProps:{value:t.newCardDescription},on:{input:function(e){e.target.composing||(t.newCardDescription=e.target.value)}}}),a("input",{staticClass:"new-task__submit material-icons",attrs:{type:"submit",value:"add"}})])},g=[],y=(a("d3b7"),a("25f0"),2),k={name:"Add",data:function(){return{newCardDescription:""}},methods:{addCard:function(){y++;var t=n["a"].extend(h),e=new t({propsData:{id:y.toString(),cardDescription:this.newCardDescription,executor:"Я"}});e.$mount(),document.getElementById("board-1").appendChild(e.$el),this.newCardDescription="",N.$emit("makeCount")}}},T=k,w=Object(l["a"])(T,C,g,!1,null,null,null),D=w.exports,$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("article",{staticClass:"modal",attrs:{id:"modal"}},[a("form",{staticClass:"redact",attrs:{action:""},on:{submit:function(e){return e.preventDefault(),t.apply(e)}}},[a("button",{staticClass:"redact__button material-icons",attrs:{onclick:"PopUpHide()"},on:{submit:function(t){t.stopPropagation()}}},[t._v("clear ")]),a("label",{staticClass:"redact__label",attrs:{for:"task-description"}},[t._v("Описание")]),a("input",{staticClass:"redact__input",attrs:{id:"task-description",name:"task-description",placeholder:"Лорем ипсум",required:"",type:"text"}}),a("label",{staticClass:"redact__label",attrs:{for:"task-status"}},[t._v("Статус")]),t._m(0),a("label",{staticClass:"redact__label",attrs:{for:"in-charge"}},[t._v("Ответственный")]),a("input",{staticClass:"redact__input",attrs:{id:"in-charge",name:"in-charge",placeholder:"Введите имя",type:"text"}}),a("label",{staticClass:"redact__label",attrs:{for:"task-start"}},[t._v("Дата и время начала")]),a("input",{staticClass:"redact__input",attrs:{id:"task-start",name:"task-start",type:"datetime-local"}}),a("label",{staticClass:"redact__label",attrs:{for:"task-finish"}},[t._v("Дата и время завершения")]),a("input",{staticClass:"redact__input",attrs:{id:"task-finish",name:"task-finish",type:"datetime-local"}}),a("input",{staticClass:"redact__submit",attrs:{type:"submit",value:"Сохранить"}})])])},x=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("select",{staticClass:"redact__input",attrs:{id:"task-status",name:"task-status"}},[a("option",{staticClass:"redact__input",attrs:{value:"board-1"}},[t._v("План")]),a("option",{staticClass:"redact__input",attrs:{value:"board-2"}},[t._v("В работе")]),a("option",{staticClass:"redact__input",attrs:{value:"board-3"}},[t._v("Готово")])])}],B={name:"Redact",methods:{apply:function(){var t=document.getElementsByClassName("modal")[0].id,e=t.slice(t.length-1);console.log("apply",e,t),N.$emit("applyChanges",e)}}},E=B,S=Object(l["a"])(E,$,x,!1,null,null,null),I=S.exports,O={name:"Main",components:{Redact:I,Board:p,Card:h,Add:D},data:function(){return{quantity:{for_board_1:2,for_board_2:0,for_board_3:0}}},created:function(){var t=this;N.$on("makeCount",(function(){t.countAll()}))},methods:{count:function(t){return document.getElementById(t).children.length},countAll:function(){this.quantity.for_board_1=this.count("board-1"),this.quantity.for_board_2=this.count("board-2"),this.quantity.for_board_3=this.count("board-3")}}},P=O,j=Object(l["a"])(P,r,i,!1,null,null,null),M=j.exports;n["a"].config.productionTip=!1;var N=new n["a"];new n["a"]({render:function(t){return t(M)}}).$mount("#main")}});
//# sourceMappingURL=app.50cd4d35.js.map